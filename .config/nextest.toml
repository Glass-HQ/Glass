[profile.default]
slow-timeout = { period = "60s", terminate-after = 1 }

[test-groups]
sequential-db-tests = { max-threads = 1 }

[[profile.default.overrides]]
filter = 'package(db)'
test-group = 'sequential-db-tests'

# Run slowest tests first.
#
[[profile.default.overrides]]
filter = 'package(worktree) and test(test_random_worktree_changes)'
priority = 100

[[profile.default.overrides]]
filter = 'package(collab) and (test(random_project_collaboration_tests) or test(random_channel_buffer_tests) or test(test_contact_requests) or test(test_basic_following))'
priority = 99

[[profile.default.overrides]]
filter = 'package(extension_host) and test(test_extension_store_with_test_extension)'
priority = 99

# Extended timeouts for tests that were timing out at 60s
[[profile.default.overrides]]
filter = 'test(test_rainbow_bracket_highlights) or test(test_wrapped_invisibles_drawing) or test(test_basic_following) or test(test_random_diagnostics_blocks)'
slow-timeout = { period = "300s", terminate-after = 1 }

[[profile.default.overrides]]
filter = 'package(extension_host) and test(test_extension_store_with_test_extension)'
slow-timeout = { period = "300s", terminate-after = 1 }

[[profile.default.overrides]]
filter = 'package(language_model) and test(test_from_image_downscales_to_default_5mb_limit)'
slow-timeout = { period = "300s", terminate-after = 1 }
